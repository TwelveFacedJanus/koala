\chapter{Ant\+Logger\+: Документация}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc}{}\label{md_external_2ant__logger_2ant__logger_8doc}\index{AntLogger: Документация@{AntLogger: Документация}}
\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md97}%
\Hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md97}%
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md98}{}\doxysection{\texorpdfstring{Описание}{Описание}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md98}
{\bfseries{Ant\+Logger}} — это мощная, потокобезопасная, кроссплатформенная система логирования для C и C++ с поддержкой\+:
\begin{DoxyItemize}
\item Уровней логирования (DEBUG, INFO, WARNING, ERROR, FATAL)
\item Модулей (строковый идентификатор источника)
\item Цветного вывода (ANSI-\/цвета)
\item Асинхронного режима (через event loop из core/async)
\item Callback для интеграции с внешними системами
\item Вывода в файл или stderr
\item Потокобезопасности
\end{DoxyItemize}

\DoxyHorRuler{0}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md100}{}\doxysection{\texorpdfstring{Быстрый старт}{Быстрый старт}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md100}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{preprocessor}{\#include\ "{}\mbox{\hyperlink{ant__logger_8h}{ant\_logger.h}}"{}}}
\DoxyCodeLine{}
\DoxyCodeLine{\textcolor{keywordtype}{int}\ \mbox{\hyperlink{milena__queue__test_8cpp_ae66f6b31b5ad750f1fe042a706a4e3d4}{main}}()\ \{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group___ant_logger_gaa2cfe4fcc129fa9b0766b9779db64858}{ant\_log\_init}}(NULL);\ \textcolor{comment}{//\ лог\ в\ stderr}}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group___ant_logger_gabc2800dfb26fd0b291ea7e04520328ec}{ant\_log\_set\_level}}(\mbox{\hyperlink{ant__logger_8h_a2b59d76f88b5231b3ac08e423a952b86}{ANT\_LOG\_DEBUG}});}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group___ant_logger_ga221ad35833a5d41f71421f2f3c066c95}{ant\_log\_enable\_colors}}(\textcolor{keyword}{true});}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group___ant_logger_ga1f76a3ecf536cfb2681828f6b8941835}{ant\_log\_enable\_async}}(\textcolor{keyword}{true});\ \textcolor{comment}{//\ асинхронный\ режим}}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{ant__logger_8h_a4e96a837103625c5cc61ab4cfff2d280}{ANT\_LOG\_INFO}}(\textcolor{stringliteral}{"{}Hello,\ world!"{}});}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{ant__logger_8h_a1191c484e103c1d4a4a2d3313589db1a}{ANT\_LOG\_WARNING\_M}}(\textcolor{stringliteral}{"{}network"{}},\ \textcolor{stringliteral}{"{}Connection\ lost:\ \%s"{}},\ \textcolor{stringliteral}{"{}timeout"{}});}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{ant__logger_8h_a9ac03a31c30a9c8cfa5677b38a315e79}{ANT\_LOG\_ERROR}}(\textcolor{stringliteral}{"{}Critical\ error:\ \%d"{}},\ 42);}
\DoxyCodeLine{}
\DoxyCodeLine{\ \ \ \ \mbox{\hyperlink{group___ant_logger_ga0d13b320d5c91e58632c230243f00bb8}{ant\_log\_shutdown}}();}
\DoxyCodeLine{\ \ \ \ \textcolor{keywordflow}{return}\ 0;}
\DoxyCodeLine{\}}

\end{DoxyCode}


\DoxyHorRuler{0}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md102}{}\doxysection{\texorpdfstring{Основные возможности}{Основные возможности}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md102}

\begin{DoxyItemize}
\item {\bfseries{Уровни\+:}} ANT\+\_\+\+LOG\+\_\+\+DEBUG, ANT\+\_\+\+LOG\+\_\+\+INFO, ANT\+\_\+\+LOG\+\_\+\+WARNING, ANT\+\_\+\+LOG\+\_\+\+ERROR, ANT\+\_\+\+LOG\+\_\+\+FATAL
\item {\bfseries{Модули\+:}} логируйте с помощью макросов {\ttfamily ANT\+\_\+\+LOG\+\_\+\texorpdfstring{$\ast$}{*}\+\_\+M(module, ...)}
\item {\bfseries{Цвет\+:}} включается через {\ttfamily ant\+\_\+log\+\_\+enable\+\_\+colors(true)}
\item {\bfseries{Асинхронность\+:}} включается через {\ttfamily ant\+\_\+log\+\_\+enable\+\_\+async(true)}
\item {\bfseries{Callback\+:}} {\ttfamily ant\+\_\+log\+\_\+set\+\_\+callback(my\+\_\+callback)}
\item {\bfseries{Файл\+:}} {\ttfamily ant\+\_\+log\+\_\+init("{}log.\+txt"{})}
\end{DoxyItemize}

\DoxyHorRuler{0}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md104}{}\doxysection{\texorpdfstring{Примеры использования}{Примеры использования}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md104}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md105}{}\doxysubsection{\texorpdfstring{Логирование с модулем}{Логирование с модулем}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md105}

\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{ant__logger_8h_a5d24c343e3c2ced67a1dbf2d49472f45}{ANT\_LOG\_INFO\_M}}(\textcolor{stringliteral}{"{}db"{}},\ \textcolor{stringliteral}{"{}Database\ connected:\ \%s"{}},\ dbname);}

\end{DoxyCode}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md106}{}\doxysubsection{\texorpdfstring{Асинхронный режим}{Асинхронный режим}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md106}

\begin{DoxyCode}{0}
\DoxyCodeLine{\mbox{\hyperlink{group___ant_logger_ga1f76a3ecf536cfb2681828f6b8941835}{ant\_log\_enable\_async}}(\textcolor{keyword}{true});}
\DoxyCodeLine{\mbox{\hyperlink{ant__logger_8h_a9ac03a31c30a9c8cfa5677b38a315e79}{ANT\_LOG\_ERROR}}(\textcolor{stringliteral}{"{}Async\ error:\ \%s"{}},\ msg);}
\DoxyCodeLine{\mbox{\hyperlink{group___ant_logger_ga1f76a3ecf536cfb2681828f6b8941835}{ant\_log\_enable\_async}}(\textcolor{keyword}{false});\ \textcolor{comment}{//\ дождаться\ завершения\ очереди}}

\end{DoxyCode}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md107}{}\doxysubsection{\texorpdfstring{Callback}{Callback}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md107}

\begin{DoxyCode}{0}
\DoxyCodeLine{\textcolor{keywordtype}{void}\ my\_cb(\mbox{\hyperlink{ant__logger_8h_a3555fa16857447d43ca763e0b54a1eaa}{ant\_log\_level\_t}}\ lvl,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ mod,\ \textcolor{keyword}{const}\ \textcolor{keywordtype}{char}*\ msg)\ \{}
\DoxyCodeLine{\ \ \ \ \textcolor{comment}{//\ отправить\ в\ syslog,\ Qt,\ etc.}}
\DoxyCodeLine{\}}
\DoxyCodeLine{\mbox{\hyperlink{group___ant_logger_ga9a61caaff7630aa717988962a55b3452}{ant\_log\_set\_callback}}(my\_cb);}

\end{DoxyCode}


\DoxyHorRuler{0}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md109}{}\doxysection{\texorpdfstring{Иллюстрированная схема работы}{Иллюстрированная схема работы}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md109}

\begin{DoxyCode}{0}
\DoxyCodeLine{[Потоки\ приложения]}
\DoxyCodeLine{\ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{\ \ \ \ \ \ v\ \ \ \ \ \ \ \ \ v\ \ \ \ \ \ \ \ \ v}
\DoxyCodeLine{\ \ \ ant\_log\_write(...)}
\DoxyCodeLine{\ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{\ \ \ \ \ \ +-\/-\/-\/-\/>\ [Асинхронная\ очередь]\ -\/-\/-\/-\/-\/>\ [Event\ loop]\ -\/-\/-\/-\/-\/>\ [ant\_log\_output]}
\DoxyCodeLine{\ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ |\ \ \ \ \ \ \ \ \ |}
\DoxyCodeLine{\ \ \ \ \ \ +-\/-\/-\/-\/>\ [Синхронно]\ \ -\/-\/-\/-\/-\/>\ [ant\_log\_output]}

\end{DoxyCode}


\DoxyHorRuler{0}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md111}{}\doxysection{\texorpdfstring{FAQ}{FAQ}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md111}
{\bfseries{Q\+: Что будет, если лог-\/файл не открылся?}}
\begin{DoxyItemize}
\item Сообщения будут писаться в stderr.
\end{DoxyItemize}

{\bfseries{Q\+: Как отключить цвет?}}
\begin{DoxyItemize}
\item {\ttfamily ant\+\_\+log\+\_\+enable\+\_\+colors(false);}
\end{DoxyItemize}

{\bfseries{Q\+: Как логировать только WARNING и выше?}}
\begin{DoxyItemize}
\item {\ttfamily ant\+\_\+log\+\_\+set\+\_\+level(\+ANT\+\_\+\+LOG\+\_\+\+WARNING);}
\end{DoxyItemize}

{\bfseries{Q\+: Как работает асинхронность?}}
\begin{DoxyItemize}
\item Сообщения помещаются в очередь и обрабатываются worker-\/потоком через event loop из core/async.
\end{DoxyItemize}

{\bfseries{Q\+: Потокобезопасно ли?}}
\begin{DoxyItemize}
\item Да, используется mutex.
\end{DoxyItemize}

{\bfseries{Q\+: Как логировать из C++?}}
\begin{DoxyItemize}
\item API полностью совместим с C++.
\end{DoxyItemize}

\DoxyHorRuler{0}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md113}{}\doxysection{\texorpdfstring{Типичные ошибки}{Типичные ошибки}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md113}

\begin{DoxyItemize}
\item {\bfseries{Передача NULL в параметры}} — будет выведено сообщение об ошибке в stderr.
\item {\bfseries{Недостаточно памяти}} — сообщение не будет залогировано, будет выведено в stderr.
\item {\bfseries{Асинхронный режим выключен, но очередь не обработана}} — сообщения пишутся синхронно.
\end{DoxyItemize}

\DoxyHorRuler{0}
\hypertarget{md_external_2ant__logger_2ant__logger_8doc_autotoc_md115}{}\doxysection{\texorpdfstring{Контакты и поддержка}{Контакты и поддержка}}\label{md_external_2ant__logger_2ant__logger_8doc_autotoc_md115}

\begin{DoxyItemize}
\item Вопросы и баги\+: создавайте issue в репозитории проекта.
\item Автор\+: twelvefaced 
\end{DoxyItemize}